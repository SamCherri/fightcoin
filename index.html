<!DOCTYPE html><html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pioneer Pass Mint</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: #0D1B2A; color: #E2E8F0; display: flex; justify-content: center; align-items: center; height: 100vh; }
    .container { text-align: center; max-width: 400px; padding: 2rem; background: #112240; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.5); }
    h1 { margin-bottom: 0.5rem; color: #4FD1C5; }
    p { margin-bottom: 1rem; }
    #counter { font-size: 1.5rem; margin: 1rem 0; color: #A6E22E; }
    button { background: #A6E22E; border: none; padding: 0.75rem 1.5rem; font-size: 1rem; border-radius: 8px; cursor: pointer; color: #0D1B2A; }
    button:disabled { background: #718096; cursor: not-allowed; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Pioneer Pass</h1>
    <p>Adquira seu NFT e torne-se Torcedor Pioneiro por R$ 100.</p>
    <div id="counter">Carregando...</div>
    <button id="mintButton">Mintar Pioneer Pass</button>
  </div>  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.min.js"></script>  <script src="https://cdn.jsdelivr.net/npm/web3modal@1.9.0/dist/index.js"></script>  <script>
    const contractAddress = "SEU_CONTRACT_ADDRESS_AQUI";
    const contractABI = [
      {"inputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"constructor"},
      {"inputs":[],"name":"closeSale","outputs":[],"stateMutability":"nonpayable","type":"function"},
      {"inputs":[],"name":"saleActive","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},
      {"inputs":[{"internalType":"uint256","name":"quantity","type":"uint256"}],"name":"mint","outputs":[],"stateMutability":"payable","type":"function"}
    ];

    let provider, signer, contract;
    const priceRWei = ethers.utils.parseUnits("100", "ether"); // R$100 equivalente em wei da rede

    async function init() {
      const web3Modal = new window.Web3Modal.default({ cacheProvider: false });
      const instance = await web3Modal.connect();
      provider = new ethers.providers.Web3Provider(instance);
      signer = provider.getSigner();
      contract = new ethers.Contract(contractAddress, contractABI, signer);
      document.getElementById('mintButton').addEventListener('click', mintPass);
      updateCounter();
      setInterval(updateCounter, 15000);
    }

    async function updateCounter() {
      const balance = await provider.getBalance(contractAddress);
      const sold = balance.div(priceRWei).toNumber();
      document.getElementById('counter').innerText = `${sold} Torcedores Pioneiros`;
      const sale = await contract.saleActive();
      document.getElementById('mintButton').disabled = !sale;
      if (!sale) document.getElementById('mintButton').innerText = 'Venda Encerrada';
    }

    async function mintPass() {
      try {
        const tx = await contract.mint(1, { value: priceRWei });
        await tx.wait();
        alert('Mint conclu√≠do! Bem-vindo, Torcedor Pioneiro.');
        updateCounter();
      } catch (e) {
        console.error(e);
        alert('Erro no mint: ' + (e.data?.message || e.message));
      }
    }

    window.addEventListener('load', init);
  </script></body>
</html> 